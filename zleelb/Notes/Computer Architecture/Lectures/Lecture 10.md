Date: 2024-09-26
Hub: [[Computer Architecture]]
Tags: #class 
URL/Title: Memory Hierarchy

##### Non blocking cache
- Prevents pipeline from stalling due to cache misses, other lines served while servicing a miss
Miss Status Handler Register (MSHR)
- Tracks cache misses
- New cache miss checks against MSHR
- Choose MSHR entries to match the sustainable bus bandwidth

##### Prefetch
- Predict data for future use
- Pollution v Latency reduction
	- correct predictions reduce latency while incorrect pollute cache
- Software-controlled prefetching
	- Use instructions
		- intel: prefetchnta
		- mips: PREF
	- Compiler or hand inserted prefetch
	- Software programmer knows access patterns better, basically better than hardware since you know how the patterns compared to hardware who would guess how you use it.
- Hardware-based Prefetching
	- Universal access patterns that hardware can apply basic prefetching to 
	- Common access pattern is sequential prefetching
		- Sequential access memory for an array
		- Prefetch on miss, when a miss happens always prefetch the next line

##### Virtual Memory
Separation of logical memory from physical memory
- Only part of program needs to be in memory
- allows address spaces to be shared by several processes
- more efficient process creation
- Implemented through pages or segmentation

###### Paging
- Divides physical memory into fixed blocks called frames
- Divides logical memory into blocks of the same size
- page table to map addresses to frame addresses

###### Virtual address
Address space bound to separate physical address space
- virtual address - generated by the CPU
- Physical Address - seen by memory
Addresses are same in compile and load time but differ in execution time schemes

###### Advantages of Virtual Memory
- Translation
	- Program given consistent view of memory
	- Most important part in physical memory
	- Contiguous structures use only as much physical memory as necessary
- Protection
	- Different thread protect from each other 
	- Different pages can be given special behavior
	- Kernel data protected
	- Important for protection from malicious programs
- Sharing
	- Can map to same physical page to multiple users
